{% extends 'base.html.twig' %}

{% use '/menu/default.html.twig' %}

{% block body %}
	<table style='width: 450px; height: 400px; border: 1px solid black;'>
		<tr>
			<td>
				<div id='ticket-gallery' class='gallery'>
					{% for merchant_id, file in files %}
						<div class='item link' value="{{file.url}}">
							<img src="{{file.url}}" />
						</div>
						<br />
					{% endfor %}
				</div>
			</td>
			<td>
				<div id='ticket-show' style='min-width: 350px; min-height: 400px; width: 100%; height: 100%;'></div>
			</td>
		</tr>
	</table>

	<table id='{{merchant_id}}' class='merchant table'>
		<tr>
			<th>Marchant</th>
			<th>Produit</th>
			<th>Description</th>
			<th>Quantite</th>
			<th>Prix Unitaire</th>
			<th>Total Commande</th>
			<th>Total Ticket</th>
			<th>Differentiel</th>
			<th>Commentaire</th>
		</tr>

		{% for merchant_id, merchant_part in order %}
			{% for product_id, product in merchant_part.products %}
				<tr>
					<td>{{merchant_part.merchant.name}}</td>
					<td>{{product.nom}}</td>
					<td>{{product.description}}</td>
					<td>{{product.quantite}}</td>
					<td>{{product.prix_kilo}}</td>
					<td>
						<span id='{{product_id}}-total'>{{product.prix_total}}</span>
					</td>
					<td>
						<span id='{{product_id}}-ticket-input' class='ticket-input'>{{product.refund_prix}}</span>
					</td>
					<td>
						<p id='{{product_id}}-diff' class='diff'>{{product.refund_diff}}</p>
					</td>
					<td>
						<span>{{product.refund_com}}</span>
					</td>
				</tr>
			{% endfor %}
		{% endfor %}
		<tr>
			<td colspan='5'>TOTAL</td>
			<td>{{total}}</td>
			<td>{{refund_total}}</td>
			<td>{{refund_diff}}</td>
			<td></td>
		</tr>
	</table>

	{% include 'forms/default.html.twig' %}
{% endblock %}
