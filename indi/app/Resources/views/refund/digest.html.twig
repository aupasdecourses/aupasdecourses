{% extends 'base.html.twig' %}

{% use '/menu/default.html.twig' %}

{% block body %}
	<table style='width: 450px; height: 400px; border: 1px solid black;'>
		<tr>
			<td>
				<div id='ticket-gallery' class='gallery'>
					{% for merchant_id, file in files %}
						<div class='item link' value="{{file.url}}">
							<img src="{{file.url}}" />
						</div>
						<br />
					{% endfor %}
				</div>
			</td>
			<td>
				<div id='ticket-show' style='min-width: 350px; min-height: 400px; width: 100%; height: 100%;'></div>
			</td>
		</tr>
	</table>
	<script type="text/javascript">
		$(document).ready(function() {
			var gallery = $('#ticket-gallery');
		
			if (gallery.length) {
				var value = $('#ticket-gallery .item:first').attr('value');
		
				$('#ticket-show').empty();
		
				OpenSeadragon({
					id: 'ticket-show',
					prefixUrl: '/media/osd/',
					tileSources: {
						type: 'image',
						url: value
					}
				});
			}
		});
		
		$('#ticket-gallery .link').on('click', function(event){
			var value = $(this).attr('value');
		
			$('#ticket-show').empty();
		
			OpenSeadragon({
				id: 'ticket-show',
				prefixUrl: '/media/osd/',
				tileSources: {
					type: 'image',
					url: value
				}
			});
		});
	</script>
{% endblock %}
