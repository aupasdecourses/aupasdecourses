function ApdcPopup(t){this.id=t.id,this.ajaxUrl=apdcPopupAjaxUrl,/-popup$/.test(this.id)||(this.id=this.id+"-popup"),"undefined"!=typeof t.ajaxUrl&&(this.ajaxUrl=t.ajaxUrl),this.init()}!function(t){function e(){i=window.innerWidth>0?window.innerWidth:screen.width}function o(){t("#supermenu .open").length>0?t("body").addClass("menu-open"):t("body").removeClass("menu-open")}function n(){var e=60;i>a&&(e=1,t("body").removeClass("sticky-header")),a>i&&(t(window).scrollTop()>e?t("body").addClass("sticky-header"):t("body").removeClass("sticky-header"))}var i=1e3,a=771;e(),t(document).ready(function(){n(),t(document).on("click",function(){window.setTimeout(o,0)}),t("#supermenu").on("click",function(){window.setTimeout(o,0)}),t(document).on("click","#supermenu .dropdown-menu",function(t){jQuery(t.target).hasClass("close-menu")||"a"===t.target.nodeName.toLowerCase()||t.stopPropagation()}),t(".dropdown-menu [data-toggle=dropdown]").on("click",function(e){if(i>a)if(t(this).parent("li").first().hasClass("open"))e.preventDefault(),e.stopPropagation();else{e.preventDefault(),e.stopPropagation();var o=t(this).siblings(".template-content").html();t(".menu-template-content").remove(),t(this).parents("div.level0 ul").after('<div class="menu-template-content">'+o+"</div>"),t(this).parent().siblings().removeClass("open"),t(this).parent().toggleClass("open")}else e.preventDefault(),e.stopPropagation()}),t(".dropdown-toggle").on("click",function(e){if(i>a){if(!t(this).parent("li").first().hasClass("open")){var o=t(this);window.setTimeout(function(){o.siblings(".dropdown-menu").find(".dropdown-submenu.active").length>0?o.siblings(".dropdown-menu").find(".dropdown-submenu.active").find("a.dropdown-toggle").first().click():o.siblings(".dropdown-menu").find(".dropdown-submenu").first().find("a.dropdown-toggle").first().click()},0)}}else e.preventDefault(),e.stopPropagation(),t(this).parents("li").first().find(".open").removeClass("open"),t(this).parents("li").first().siblings().removeClass("open"),t(this).parents("li").first().toggleClass("open")}),t(window).scroll(n),t(".deploy-menu-button").on("click",function(e){e.preventDefault(),e.stopPropagation(),t(this).parents("li").first().find(".open").removeClass("open"),t(this).parents("li").first().siblings().removeClass("open"),t(this).parents("li").first().toggleClass("open")})});var p=null;t(window).resize(function(){p&&clearTimeout(p),p=setTimeout(function(){e()},50)})}(jQuery),ApdcPopup.prototype.init=function(){this.getTemplate()},ApdcPopup.prototype.getTemplate=function(){var t=this;jQuery.ajax({url:t.ajaxUrl,data:{isAjax:1,id:t.id},type:"POST"}).done(function(e){"SUCCESS"===e.status&&(jQuery("body").append(e.html),window.setTimeout(function(){t.initActions()},0))}).fail(function(){console.log("ERROR: get popup template for "+t.id)})},ApdcPopup.prototype.initActions=function(){var t=this;jQuery(document).on("click","#"+t.id+" .apdc-popup-overlay",function(){t.close()}),jQuery(document).on("click","#"+t.id+" .apdc-popup-close",function(){t.close()}),jQuery(document).keyup(function(e){27==e.keyCode&&t.close()})},ApdcPopup.prototype.show=function(){jQuery("#"+this.id).fadeIn("fast")},ApdcPopup.prototype.close=function(){jQuery("#"+this.id).fadeOut("fast")},ApdcPopup.prototype.updateContent=function(t){this.hideLoading(),jQuery("#"+this.id+" .apdc-popup-content").html(t)},ApdcPopup.prototype.showLoading=function(){jQuery("#"+this.id+" .apdc-popup-content").html(""),jQuery("#"+this.id+" .apdc-popup-loading").show(),this.show()},ApdcPopup.prototype.hideLoading=function(){jQuery("#"+this.id+" .apdc-popup-loading").hide()},jQuery(document).on("click","input",function(){jQuery(".validation-advice").remove()}),Validation.add("required-entry","Merci de compléter ce champ!",function(t){return!Validation.get("IsEmpty").test(t)}),jQuery(document).ready(function(){function t(t,e){var o=jQuery(t).data("login-view"),n=new FormData;n.append("isAjax",1),n.append("handle",e),jQuery.ajax({url:o,data:n,processData:!1,contentType:!1,type:"POST"}).done(function(t){if("SUCCESS"===t.status)loginContent=t.html,apdcLoginPopup.updateContent(t.html);else if("ERROR"===t.status){var e='<ul class="messages"><li class="notice-msg"><ul><li><span>'+t.message+"</span></li></ul></li></ul>";apdcLoginPopup.updateContent(e)}}).fail(function(){console.log("failed")})}function e(t){var e=jQuery(t).attr("action"),o=new FormData(jQuery(t)[0]);o.append("isAjax",1),jQuery(t).children("input").attr("disabled",!0),jQuery(t).children("button").attr("disabled",!0).removeClass("button-green"),jQuery.ajax({url:e,data:o,processData:!1,contentType:!1,type:"POST"}).done(function(t){"SUCCESS"===t.status?"undefined"!=typeof t.redirect?window.location.href=t.redirect:(loginContent=t.html,apdcLoginPopup.updateContent(t.html)):"ERROR"===t.status?(loginContent=t.html,apdcLoginPopup.updateContent(t.html)):console.log("failed")}).fail(function(){console.log("failed")})}"undefined"==typeof apdcLoginPopup&&(apdcLoginPopup=new ApdcPopup({id:"login-form"})),jQuery(document).on("click","#account-login",function(e){e.preventDefault(),e.stopPropagation(),apdcLoginPopup.showLoading(),t(this,"apdc_login_view")}),jQuery(document).on("submit","#login-form",function(t){t.preventDefault(),t.stopPropagation(),e(this)}),jQuery(document).on("click","#choose-district",function(){apdcLoginPopup.close()}),jQuery(document).on("click","#forgot-password",function(e){e.preventDefault(),e.stopPropagation(),t(this,"apdc_forgotpassword_view")}),jQuery(document).on("submit","#password-form",function(t){t.preventDefault(),t.stopPropagation(),e(this)})}),Validation.add("required-entry","Merci de compléter ce champ!",function(t){return!Validation.get("IsEmpty").test(t)}),jQuery(document).ready(function(){function t(t,e){var o=jQuery(t).data("newsletter-view"),n=new FormData;n.append("isAjax",1),n.append("handle",e),jQuery.ajax({url:o,data:n,processData:!1,contentType:!1,type:"POST"}).done(function(t){if("SUCCESS"===t.status)apdcNewsletterPopup.updateContent(t.html);else if("ERROR"===t.status){var e='<ul class="messages"><li class="notice-msg"><ul><li><span>'+t.message+"</span></li></ul></li></ul>";apdcNewsletterPopup.updateContent(e)}}).fail(function(){console.log("failed")})}function e(t){var e=jQuery(t).attr("action"),o=new FormData(jQuery(t)[0]);o.append("isAjax",1),jQuery(t).children(".form-group").children("input").attr("disabled",!0),jQuery(t).children(".form-group").children("select").attr("disabled",!0),jQuery(t).children("button").attr("disabled",!0).removeClass("button-green"),jQuery.ajax({url:e,data:o,processData:!1,contentType:!1,type:"POST"}).done(function(t){t=JSON.parse(t),apdcNewsletterPopup.updateContent(t.html)}).fail(function(){console.log("failed")})}"undefined"==typeof apdcNewsletterPopup&&(apdcNewsletterPopup=new ApdcPopup({id:"newsletter-form"})),jQuery(document).on("click","#newsletter-popup",function(e){e.preventDefault(),e.stopPropagation(),apdcNewsletterPopup.showLoading(),t(this,"apdc_newsletter_view")}),jQuery(document).on("submit","#newsletter-form",function(t){t.preventDefault(),t.stopPropagation(),e(this)})}),jQuery.noConflict(),function(t){"use strict";function e(){this.windowLoaded=!1}e.prototype={constructor:e,start:function(){var e=this;t(window).load(function(){e.windowLoaded=!0}),this.attach()},attach:function(){this.attachBootstrapPrototypeCompatibility(),this.attachMedia()},attachBootstrapPrototypeCompatibility:function(){t("*").on("show.bs.dropdown show.bs.collapse",function(e){t(e.target).addClass("bs-prototype-override")}),t("*").on("hidden.bs.collapse",function(e){t(e.target).removeClass("bs-prototype-override")})},attachMedia:function(){var e=t('[data-toggle="media"]');e.length&&e.on("click",function(e){e.preventDefault();var o=t(this),n=t(o.attr("href")),i=n.find(".carousel"),a=parseInt(o.data("index"));return i.carousel(a),n.modal("show"),!1})}},jQuery(document).ready(function(){var t=new e;t.start()})}(jQuery);