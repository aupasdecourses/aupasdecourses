<?php

// Upgrade data only if no Neighborhoods exists
$shops = Mage::getModel('apdc_commercant/shop')->getCollection();

$data = array(array("9458096","467ABP09","AU BON PORT MONTMARTRE","ABP09"),
array("8838915","467ABP13","AU BON PORT JEANNE D'ARC","ABP13"),
array("9938614","467ADL9","ARTISANS DU LAIT","ADL9"),
array("8839367","467ALB14","A L'OMBRE D'UN BOUCHON","ALB14"),
array("8472003","467APF15","AU PETIT FROMAGER","APF15"),
array("9457184","467AVF9","AU VERGER FLEURI","AVF9"),
array("4750292","467BDM17","BOUCHERIE DES MOINES","BDM17"),
array("8481370","467BDT13","BOULANGERIE DE TOLBIAC","BDT13"),
array("8171402","467BFL15","BOUCHERIE FRANCK LEBREC","BFL15"),
array("9358858","467BLE9","BOULANGERIE LANDEMAINE","BLE9"),
array("7076982","467BMS10","BOUCHERIE LEVEQUE","BMS10"),
array("4757039","467BOU17","BOUTEILLE","BOU17"),
array("8344567","467BP13","BOUCHERIE PERSILLE","BP13"),
array("9799717","467CAV9","CAVAVIN","CAV9"),
array("7157528","467CSA10","VERGER SAINT-MARTIN","CSA10"),
array("9027896","467CSV16","CAVE SAINT VINCENT","CSV16"),
array("9560256","467CUT17","CUTS","CUT17"),
array("7077089","467CVM10","LA CAVE DU MARCHE SAINT-MARTIN","CVM10"),
array("5945629","467DAN17","BOUCHERIE DANDELION","DAN17"),
array("10214610","467DUP11","BOULANGERIE DUPAIN","DUP11"),
array("9801864","467FCA7","FROMAGERIE CANTIN","FCA7"),
array("4784325","467FDB17","LA FILLE DU BOULANGER","FDB17"),
array("7077089","467FLB10","FROMAGERIE BOUVET","FLB10"),
array("4778105","467FRB17","LES FROMAGES DES BATIGNOLLES","FRB17"),
array("9935938","467GMD17","LE GARDE MANGER DES DAMES","GMD17"),
array("9954311","467HCR07","HARRY COVER","HCR07"),
array("7949632","467HFF15","LES HALLES FELIX FAURE","HFF15"),
array("9365908","467IDF13","INCUBATEUR DE FRAICHEUR","IDF13"),
array("8839251","467JDS16","AU JARDIN DES SABLONS","JDS16"),
array("9292243","467LBP14","BOUCHERIE PERNETY","LBP14"),
array("9835894","467LCD7","LE CHAMP DES DELICES","LCD7"),
array("10198750","467LCP03","LA CABANE DU PECHEUR","LCP03"),
array("8362484","467LCT13","LA CAVE DE TOLBIAC","LCT13"),
array("9948965","467LFG11","FROMAGERIE GONCOURT","LFG11"),
array("8480923","467LFL13","LA FROMAGERIE LASNIER","LFL13"),
array("9028000","467LFT17","LES FRUITS DE LA TERRE BIO","LFT17"),
array("7989320","467LGV15","LE GOUT DES VIGNES","#N/D"),
array("9366111","467LMM15","LA MAISON DE LA MOZZARELLA","LMM15"),
array("8839459","467LPA14","POISSONNERIE L'ARGONAUTE","LPA14"),
array("9566568","467LPD7","LES PETITS DOMAINES","LPD7"),
array("9141312","467LRC17","LAURENT ROY CHOCOLATIER","LRC17"),
array("7284244","467LVN10","LES VIVIERS DE NOIRMOUTIER","LVN10"),
array("4860651","467Mar17","MAREE 17","MAR17"),
array("9365435","467MIM17","LA MERE-MIMOSA","MIM17"),
array("8911812","467MLO16","FROMAGERIE LILLO","MLO16"),
array("9358785","467MOI14","LE PAIN AU NATUREL","MOI14"),
array("9358635","467MOI15","BOULANGERIE MOISAN FONDARY","MOI15"),
array("4756582","467MPB17","PASCAL BASSARD PRIMEUR","MPB17"),
array("7150548","467MQF10","LA MICHE QUI FUME","MQF10"),
array("8962417","467PBC13","PRIMEUR DE LA BUTTE-AUX-CAILLES","PBC13"),
array("8911558","467PDG14","PRIMEUR DE GAMA","PDG14"),
array("9820424","467PLB05","POISSONNERIE LA BOULONNAISE","PLB05"),
array("9949009","467RSB12","LE RAISIN BLEU","RSB12"),
array("7011801","467TDC17","TERRES DE CAFE","TDC17"),
array("9935868","467VCM07","LES VIANDES DU CHAMP DE MARS","VCM7"),
array("8053872","467VDO15","VENT D'OUEST MAREE","VDO15"),
array("10304566","467PRC11","PRIMEUR CLEMENTINE ","#N/D"));

$tmp=array();
foreach($data as $row){
	$tmp[$row[3]]=array(
		'cpte_hipay'=>$row[0],
		'cpte_compta'=>$row[1],
	);
}

foreach($shops as $shop){
	if(array_key_exists($shop->getCode(), $tmp)){
		$d=$tmp[$shop->getCode()];
		$shop->setCpteHipay($d['cpte_hipay']);
		$shop->setCpteCompta($d['cpte_compta']);
		$shop->save();
	}else{
		Mage::log($shop->getCode()." not found",null,"data_commercants.log");
	}
}

